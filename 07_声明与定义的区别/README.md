# 第七节：声明与定义的区别

解释了好多遍，还是有同学不了解在C/C++中声明和定义的区别。
这里简单介绍一下。

## 如何声明和定义

### 变量

声明：

    extern int a;

定义：
    int a;

### 函数

声明：

    void fun();

定义：

    void fun(){
    }

### 结构体／类

声明：

    class Bar;

定义：

    class Bar{
    public:
        Bar();
        int foo();
    };

这里虽然`Bar::Bar`和`Bar::foo`都只有声明，没有定义。
但是`class Bar`已经定义完了。

## 声明和定义的本质区别是什么？

声明没有为符号分配存储空间、定义会为符号分配存储空间。

### 变量

    extern int a;

这句话是告诉编译器，变量a在别的地方有了，
所以不需要在这为它分配存储空间了。

    int a;

这句话是告诉编译器，我需要创建一个变量，请为它分配存储空间。

### 函数

    void fun();

函数体包含若干语句，编译后会产生若干指令。
声明是告诉编译器，这个函数的指令保存在别的地方了。

    void fun(){
    }

这里会为这个函数分配存储空间、保存函数的指令。

### 结构体／类

    class Bar;

同样不分配存储空间。

    class Bar{};

一个结构体／类在定义的时候会产生它的各种指针，
其中最重要的是它的函数地址表。

结构体内部的成员变量会在它初始化的时候才会分配内存。

## 为什么会有编译期错误

为什么一个没有定义的结构体/类，
在定义它的变量的时候会报告编译期错误？

因为有的结构体/类不能定义它的变量。
（比如它的构造函数是private的。
在`设计模式`中，C++常用这种技术来实现单例模式。）

编译器只有在看到它的定义，
才能知道它是否可以定义变量。

## 结尾

感觉解释的不是很清楚，不过我能力也就如此了。

本节完。
